<%= stylesheet_link_tag 'css/group_table' %>

<p id="notice"><%= notice %></p>

<h1>Users</h1>

<div class="container">
  <table id="data-table" class="table table-striped table-bordered dataTables_wrapper order-column form-inline dt-bootstrap nowrap" width="100%" cellspacing="0" >
    <thead>
      <tr>
        <th>Fistname</th>
        <th>Lastname</th>
        <th>Username</th>
        <th>Rol</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <%@Students.each do |student|%>
        <tr>
          <td><%= student.first_name %></td>
          <td><%= student.last_name %></td>
          <td><%= link_to student.username, student %></td>
          <td>Student</td>
          <td><button onclick="createUser('<%=student.id%>','<%=investigation_group_contribution_createUser_path%>','<%=@contribution.id%>','Student')">+</button></td>
        </tr>
      <%end%>
      <%@Teachers.each do |teacher| %>
        <tr>
          <td><%= teacher.teacher.first_name %></td>
          <td><%= teacher.teacher.last_name %></td>
          <td><%= link_to teacher.teacher.username, teacher.teacher %></td>
          <td><%= teacher.rol %></td>
          <td><button onclick="createUser('<%=teacher.teacher.id%>','<%=investigation_group_contribution_createUser_path%>','<%=@contribution.id%>','Teacher')">+</button></td>
        <%end%>
    </tbody>
  </table>
</div>

<%=link_to 'Back', investigation_group_contribution_users_path, :class=>"btn btn1" %>

<script>
  function createUser(ids, url, contr, type){
    $.ajax({
      type: "POST",
      url: url,
      data: {"ids": ids,"type": type, "contr": contr },
      success: function(){alert("OH SI, NUEVO USUARIO EN LA CONTRIBUCION")}
    });
  }
</script>
