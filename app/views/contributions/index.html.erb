<p id="notice"><%= notice %></p>

<h1>Contributions</h1>

<div class="Search">
<%= form_tag contributions_path, :method => 'get' do %>
  <%= select_tag 'tag', options_from_collection_for_select(@tags, "id", "name"), prompt: "All tags"%>
  <%= select_tag 'group', options_from_collection_for_select(@groups, "id", "name"), prompt: "All groups"%>
  <%= submit_tag "Search", :name => nil %>
<%end%>
</div>

<div class="paginate">
  <td>
  <%= link_to_if @page > 1 , "<" , :action => "index", :page => @page-1 %>
   <%=@page%> de <%= @totalPages %>
   <%=link_to_if @page < @totalPages,">",:action => "index",:page => @page+1
   %>
</td>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Publication date</th>
      <th>Description</th>
      <th>Investigation group</th>
      <th>Tags</th>
<!--
      <th colspan="3"></th>
    -->
    </tr>
  </thead>
  <tbody>
    <% @contributions.each do |contribution| %>
      <tr>
        <td><%= link_to contribution.name, contribution %></td>
        <td><%= contribution.publication_date %></td>
        <td><%= contribution.description %></td>
        <td><%= link_to contribution.investigation_group.name, :controller => "investigation_groups", :action => "show", :id => contribution.investigation_group.id%></td>
<!--
        <td><%= link_to 'Show', contribution %></td>
        <td><%= link_to 'Edit', edit_contribution_path(contribution) %></td>
        <td><%= link_to 'Destroy', contribution, method: :delete, data: { confirm: 'Are you sure?' } %></td>

-->
        <% myTags=''
        contribution.tags.each do |tag|
          myTags<<tag.name
          if tag != contribution.tags.last
            myTags<<', '
          end
        end %>
        <td> <%=myTags.to_s%></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'New Contribution', new_contribution_path %>
